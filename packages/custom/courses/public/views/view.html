<section data-ng-controller="CoursesController" data-ng-init="findOne()">

<div ng-intro-options="tour.IntroOptions" ng-intro-method="CallMe"
         ng-intro-oncomplete="tour.CompletedEvent" ng-intro-onexit="tour.ExitEvent"
         ng-intro-onchange="tour.ChangeEvent" ng-intro-onbeforechange="tour.BeforeChangeEvent"
         ng-intro-onafterchange="tour.AfterChangeEvent"
         ng-intro-autostart="tour.ShouldAutoStart"></div>




<div ng-show="dataLoading" id="floatingCirclesG">
<div class="f_circleG" id="frotateG_01"></div>
  <div class="f_circleG" id="frotateG_02"></div>
  <div class="f_circleG" id="frotateG_03"></div>
  <div class="f_circleG" id="frotateG_04"></div>
  <div class="f_circleG" id="frotateG_05"></div>
  <div class="f_circleG" id="frotateG_06"></div>
  <div class="f_circleG" id="frotateG_07"></div>
  <div class="f_circleG" id="frotateG_08"></div>
</div>
<div class="container-fluid row" ng-show="pageLoaded">  
<div class="coreada-box">        

  <perfect-scrollbar class="tableScroller   always-visible" suppress-scroll-y="true" scrollX-margin-offset='5' wheel-propagation="true" wheel-speed="10" min-scrollbar-length="20"   model="indicatorsSelectionModel"> 
  
 <table id="data-table"  class="table data-table"   ng-include src="'courses/views/table.html'" ></table>


  <div id="divOverlay"> </div> 
   <div id="divHoverOverlay" ng-show='courseDisplay && tabSelect=="stats"'></div> 
   </perfect-scrollbar>  
</div>

  <div style='margin:0px;margin-bottom:5px;  padding:0;  display: flex; '>
 

 <div id='tableConfg' class="btn-group" uib-dropdown is-open="status.isopen">
 <button id="single-button" type="button" class="glyphicon glyphicon glyphicon-option-horizontal indicatorSelectorButton" uib-dropdown-toggle ng-disabled="disabled"></button>
      <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button">
        <li role="menuitem"><a href="#" ng-click="allFactsDisplay=!allFactsDisplay">
{{allFactsDisplay ? "Afficher moins de problèmes" : "Afficher plus de problèmes"}}

        </a></li>
               <li class="divider"></li>
        <li role="menuitem" ng-click="indicatorSelectorShow=!indicatorSelectorShow"><a href="#">
{{indicatorSelectorShow ? "Cacher le sélecteur d'indicateurs" : "Afficher le sélecteur d'indicateurs"}}</a></li>
        <li role="menuitem" ng-click="allIndicatorSelectorShow=!allIndicatorSelectorShow"><a href="#">Afficher tous les indicateurs</a></li>
      </ul>
    </div>
 
<div ng-show="indicatorSelectorShow" style='display: inline-flex'>


    <select class="indicatorSelectorShow"  model="indicatorsSelectionModel"  selector  multi="true" options="indicatorsHeader"   group-attr ="category"  value-attr="value">      
    </select>

<div style='padding:3px'>
     <span class="mycheckbox" role='button' ng-click="indicatorSelectorShow=false">X</span>
  </div>
 

    </div>

  </div>
  

    <div class="inspector-container" id="inspector-container">
       <!-- tabs -->
      <div class=" col-lg-9 coreada-tabs coreada-tabs-effect-slide-top coreada-tabs-theme coreada-tabs-height-auto ">
       
        
        <input type="radio" name="coreada-tabs" id="tab2" value="facts" class="tab-facts" ng-model="tabSelect">
        <label id='factsTab' for="tab2" ><span class="glyphicon glyphicon-exclamation-sign" style='margin-right: 2px'></span> <b>{{pageCount()>-1?pageCount()+1:"Aucun" }}</b> {{pageCount()>0 ? "problèmes potentiels":"problème potentiel"}}  

         <ul class="paginator" ng-show="inspectorFacts.Facts.length>1"> 
              <li ng-class="DisablePrevPage()">
                <span  role='button' class='glyphicon glyphicon-backward' ng-click="prevPage()"></span>

              </li>
              <li class="active"><b >{{currentFact+1}}/{{pageCount()+1}}</b>
              
              <li  ng-class="DisableNextPage()">
                <span  role='button' class='glyphicon glyphicon-forward' ng-click="nextPage()"></span>
              </li>
          </ul>

        </label> 
    

         <input type="radio" name="coreada-tabs" checked  id="tab1" value="stats" class="tab-stats" ng-model="tabSelect">
        <label id='statsTab' for="tab1"><span class="glyphicon glyphicon-stats" style='margin-right: 2px'></span>Stats</label>
        <label class='inspector-title' ">
          <span   ng-class="{'glyphicon glyphicon-file': !courseDisplay, 'glyphicon glyphicon-home': courseDisplay}"  aria-hidden="true "> </span> 
            <a title="Voir sur OpenClassrooms (nouvelle fenêtre)" title="Voir sur OpenClassrooms (nouvelle fenêtre)" target='_blank' data-ng-href="{{context.url}}" ><em>{{context.inspector_title}}</em></a>
             <span  style='margin-left:10px;margin-bottom:0' class="glyphicon glyphicon glyphicon-new-window" aria-hidden="true"></span> 
          </label>
        
        <ul>

         
          <li class="tab-content vcenter tab-stats col-lg-12" >
          <div class="vcenter col-lg-6"  ng-show='inspectorDisplaySrc=="course"'  ng-include src="'courses/views/course.html'" > </div>
          <div class="vcenter col-lg-6" ng-show='inspectorDisplaySrc!="course"' ng-include src="'courses/views/component.html'" ></div>
           <div id='chartPanel2' class='col-lg-6 pull-right'>
              <div class='chart-title' ><b>{{getGraphTitle(inspectorStats.indicatorCode)}}</b></div>
              <d3-chart data='context.d3'  d3opts='{type:"inspector",elementType:inspectorStats.type,elementId:inspectorStats.id,issueCode:inspectorStats.indicatorCode, tab:"stats"}' style="height:0"></d3-chart>
          </div>
          </li>
          
          <li class="tab-content vcenter tab-facts col-lg-12"> 
          <div class="btn-actions"  align="center" ng-show='tabSelect=="facts" && pageCount()>=0'>
  <button type="button" class="btn btn-primary" ng-class="DisablePrevPage()" ng-click="prevPage()">&nbsp;<span class="glyphicon glyphicon-backward" ></span> &nbsp;</button>
  <button type="button" class="btn  btn-danger"  ng-click="dropFact()"><span class="glyphicon glyphicon-remove" ></span> &nbsp;Ce n'est pas/plus un problème</button>
  <button type="button" class="btn  btn-success" ng-click="editSuggestion()" ><span class="glyphicon glyphicon-plus" ></span>&nbsp;Créer une tâche pour ce problème</button>
  <button type="button" class="btn btn-primary" ng-class="DisableNextPage()" ng-click="nextPage()">&nbsp; <span class="glyphicon glyphicon-forward" ></span>&nbsp;</button>
</div>
          
           <div ng-show='pageCount()<0' >
           <div class="well well-success well-lg">
           <h3>Il n’y a pas de problèmes majeurs dans {{inspectorStats.typeTxt}}. </h3>
           <br/>
         
           <h5>Vous pouvez aussi afficher plus de problèmes ou consulter les statistiques globales de {{inspectorStats.typeTxt}}.</h5>
           <div class="btn-group"  align="center" >
              <button type="button" class="btn  btn-primary"  ng-click="allFactsDisplay=true">Afficher tous les problèmes</button>
              <button type="button" class="btn  btn-primary" ng-click="tabSelect='stats'" >Consulter les statistiques</button>
          </div>
         
           </div>
           <div>
           <br/>
          
           </div></div>

           

          <div class="vcenter col-lg-6" ng-show='pageCount()>=0' ng-include src="'courses/views/facts.html'"> </div>
          <div id='chartPanel' class='col-lg-6 pull-right'>
          <div class='chart-title' ng-show='pageCount()>=0'><b>{{getGraphTitle(inspectorFacts.indicatorCode)}}</b></div>
           <d3-chart data='context.d3' ng-show='pageCount()>=0' d3opts='{type:"inspector",elementType:inspectorFacts.type,elementId:inspectorFacts.id,issueCode:inspectorFacts.indicatorCode, tab:"facts"}' style="height:0"></d3-chart>
          </div>
          </div>


          </li>
         
          
 


          
        </ul>
        <div class="col-lg-3 " >   
        <div id="task-panel" class="fadein fadeout showpanel panel"  ng-include src="'courses/views/tasks-manager.html'"></div>
      </div>
      </div>
      <!--/ tabs -->

    </div>

  </div>

  </div>  

<span  id='tourStarter1' class='tourStarter' style=''   role="button" ng-click ="CallMe();"><i class="fa fa-compass"></i>&nbsp;&nbsp;Visite guidée</span>
</section>



