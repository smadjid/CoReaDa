byParts
chaps=unique(structure[which(structure$type=='title-2'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%chaps),c('part_id','norecovery')]
medianR = round(100* median(Ruptures$norecovery)/sum(Ruptures$norecovery),2)
byChaps = Ruptures[which(Ruptures$norecovery>quantile(Ruptures$norecovery,0.9,na.rm = TRUE)),]
byChaps$norecovery=round(byChaps$norecovery * 100 / sum(Ruptures$norecovery),1)
byChaps$classe="Stop"
byChaps$issueCode="StopRSExit"
byChaps$content=paste("Trop d’arrêts définitifs de la lecture sur ce chapitre")
byChaps$description=paste(byChaps$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur ce chapitre.
La valeur moyenne des arrêts définitifs sur les autres chapitres est de",medianR,"%")
byChaps$suggestion_title="Revoir le chapitre et sa structure"
byChaps$suggestion_content=""
tomes=unique(structure[which(structure$type=='title-1'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%tomes),c('part_id','norecovery')]
medianR = round(100* median(Ruptures$norecovery)/sum(Ruptures$norecovery),2)
bytomes = Ruptures[which(Ruptures$norecovery>quantile(Ruptures$norecovery,0.9,na.rm = TRUE)),]
bytomes$norecovery=round(bytomes$norecovery * 100 / sum(Ruptures$norecovery),1)
bytomes$classe="Stop"
bytomes$issueCode="StopRSExit"
bytomes$content=paste("Trop d’arrêts définitifs de la lecture sur cette partie")
bytomes$description=paste(bytomes$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette partie.
La valeur moyenne des arrêts définitifs sur les autres partie est de",medianR,"%")
bytomes$suggestion_title="Revoir la partie et sa structure"
bytomes$suggestion_content=""
bytomes
tomes=unique(structure[which(structure$type=='title-1'),]$part_id)
tomes
StopData = Ruptures[which(Ruptures$part_id %in%tomes),c('part_id','norecovery')]
medianR = round(100* median(Ruptures$norecovery)/sum(Ruptures$norecovery),2)
parts=unique(structure[which(structure$type=='title-3'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%parts),c('part_id','norecovery')]
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
byParts = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
byParts$norecovery=round(byParts$norecovery * 100 / sum(StopData$norecovery),1)
byParts$classe="Stop"
byParts$issueCode="StopRSExit"
byParts$content=paste("Trop d’arrêts définitifs de la lecture sur cette section")
byParts$description=paste(byParts$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette section. La valeur moyenne des arrêts définitifs sur les autres parties est de",medianR,"%")
byParts$suggestion_title="Revoir la section et la structuration"
byParts$suggestion_content=""
chaps=unique(structure[which(structure$type=='title-2'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%chaps),c('part_id','norecovery')]
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
medianR
byChaps = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
byChaps
chaps=unique(structure[which(structure$type=='title-2'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%chaps),c('part_id','norecovery')]
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
byChaps = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
byChaps$norecovery=round(byChaps$norecovery * 100 / sum(StopData$norecovery),1)
byChaps$classe="Stop"
byChaps$issueCode="StopRSExit"
byChaps$content=paste("Trop d’arrêts définitifs de la lecture sur ce chapitre")
byChaps$description=paste(byChaps$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur ce chapitre.
La valeur moyenne des arrêts définitifs sur les autres chapitres est de",medianR,"%")
byChaps$suggestion_title="Revoir le chapitre et sa structure"
byChaps$suggestion_content=""
tomes=unique(structure[which(structure$type=='title-1'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%tomes),c('part_id','norecovery')]
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
bytomes = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
bytomes$norecovery=round(bytomes$norecovery * 100 / sum(StopData$norecovery),1)
bytomes$classe="Stop"
bytomes$issueCode="StopRSExit"
bytomes$content=paste("Trop d’arrêts définitifs de la lecture sur cette partie")
bytomes$description=paste(bytomes$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette partie.
La valeur moyenne des arrêts définitifs sur les autres partie est de",medianR,"%")
bytomes$suggestion_title="Revoir la partie et sa structure"
bytomes$suggestion_content=""
bytomes
StopData = Ruptures[which(Ruptures$part_id %in%tomes),c('part_id','norecovery')]
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
bytomes = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
bytomes
StopData$norecovery
quantile(StopData$norecovery,0.9,na.rm = TRUE)
bytomes = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
bytomes
bytomes = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
bytomes$norecovery=round(bytomes$norecovery * 100 / sum(StopData$norecovery),1)
bytomes$classe="Stop"
bytomes$issueCode="StopRSExit"
bytomes$content=paste("Trop d’arrêts définitifs de la lecture sur cette partie")
bytomes$description=paste(bytomes$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette partie.
La valeur moyenne des arrêts définitifs sur les autres partie est de",medianR,"%")
bytomes$suggestion_title="Revoir la partie et sa structure"
bytomes$suggestion_content=""
bytomes
nrow(bytomes)
maxStops =  rbind(byParts,byChaps,byTomes)
byParts
byParts
names(byParts)
StopData = Ruptures[which(Ruptures$part_id %in%parts),c('part_id','norecovery')]
StopData
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
byParts = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
byParts$norecovery=round(byParts$norecovery * 100 / sum(StopData$norecovery),1)
byParts$classe="Stop"
byParts$issueCode="StopRSExit"
byParts$content=paste("Trop d’arrêts définitifs de la lecture sur cette section")
byParts$description=paste(byParts$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette section. La valeur moyenne des arrêts définitifs sur les autres parties est de",medianR,"%")
byParts$suggestion_title="Revoir la section et la structuration"
byParts$suggestion_content=""
byParts
names(byParts)
names(byChaps)
names(byTomes)
tomes=unique(structure[which(structure$type=='title-1'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%tomes),c('part_id','norecovery')]
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
byTomes = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
byTomes$norecovery=round(byTomes$norecovery * 100 / sum(StopData$norecovery),1)
byTomes$classe="Stop"
byTomes$issueCode="StopRSExit"
byTomes$content=paste("Trop d’arrêts définitifs de la lecture sur cette partie")
bytomes$description=paste(byTomes$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette partie.
La valeur moyenne des arrêts définitifs sur les autres partie est de",medianR,"%")
byTomes$suggestion_title="Revoir la partie et sa structure"
byTomes$suggestion_content=""
byTomes
maxStops =  rbind(byParts,byChaps,byTomes)
names(byTomes)
names(byChaps)
bytomes$description=paste(byTomes$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette partie.
La valeur moyenne des arrêts définitifs sur les autres partie est de",medianR,"%")
maxStops =  rbind(byParts,byChaps,byTomes)
names(byParts)
names(byChaps)
names(byTomes)
tomes=unique(structure[which(structure$type=='title-1'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%tomes),c('part_id','norecovery')]
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
byTomes = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
byTomes$norecovery=round(byTomes$norecovery * 100 / sum(StopData$norecovery),1)
byTomes$classe="Stop"
byTomes$issueCode="StopRSExit"
byTomes$content=paste("Trop d’arrêts définitifs de la lecture sur cette partie")
byTomes$description=paste(byTomes$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette partie.
La valeur moyenne des arrêts définitifs sur les autres partie est de",medianR,"%")
byTomes$suggestion_title="Revoir la partie et sa structure"
byTomes$suggestion_content=""
maxStops =  rbind(byParts,byChaps,byTomes)
maxFinalStops =  rbind(byParts,byChaps,byTomes)
parts=unique(structure[which(structure$type=='title-3'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%parts),c('part_id','rupture')]
medianR = round(100* median(StopData$rupture)/sum(StopData$rupture),2)
byParts = StopData[which(StopData$rupture>quantile(StopData$rupture,0.9,na.rm = TRUE)),]
byParts$rupture=round(byParts$rupture * 100 / sum(StopData$rupture),1)
byParts$classe="Stop"
byParts$issueCode="StopRSEnd"
byParts$content=paste( "Trop de séances de lecture se terminent sur cette section")
byParts$description=paste(byParts$rupture, "% de fins de séances de lecture se passent sur cette section. La valeur moyenne pour les autres parties est de",medianR,"%")
byParts$suggestion_title="Revoir la section et la structure de son chapitre"
byParts$suggestion_content=""
chaps=unique(structure[which(structure$type=='title-2'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%chaps),c('part_id','rupture')]
medianR = round(100* median(StopData$rupture)/sum(StopData$rupture),2)
byChaps = StopData[which(StopData$rupture>quantile(StopData$rupture,0.9,na.rm = TRUE)),]
byChaps$rupture=round(byChaps$rupture * 100 / sum(StopData$rupture),1)
byChaps$classe="Stop"
byChaps$issueCode="StopRSEnd"
byChaps$content=paste( "Trop de séances de lecture se terminent sur ce chapitre")
byChaps$description=paste(byChaps$rupture, "% de fins de séances de lecture se passent sur ce chapitre. La valeur moyenne pour les autres chapitre est de",medianR,"%")
byChaps$suggestion_title="Revoir le chapitre et la structure de la partie le contenant"
byChaps$suggestion_content=""
tomes=unique(structure[which(structure$type=='title-1'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%tomes),c('part_id','rupture')]
medianR = round(100* median(StopData$rupture)/sum(StopData$rupture),2)
byTomes = StopData[which(StopData$rupture>quantile(StopData$rupture,0.9,na.rm = TRUE)),]
byTomes$rupture=round(byTomes$rupture * 100 / sum(StopData$rupture),1)
byTomes$classe="Stop"
byTomes$issueCode="StopRSEnd"
byTomes$content=paste( "Trop de séances de lecture se terminent sur cette partie")
byTomes$description=paste(byTomes$rupture, "% de fins de séances de lecture se passent sur cette partie La valeur moyenne pour les autres parties est de",medianR,"%")
byTomes$suggestion_title="Revoir la partie et la structure du cours"
byTomes$suggestion_content=""
maxRStops =  rbind(byParts,byChaps,byTomes)
maxRStops
maxFinalStops
Stop_next_recovery = Ruptures[which(Ruptures$next_recovery<quantile(Ruptures$next_recovery,0.3,na.rm = TRUE)),c('part_id','next_recovery')]
Ruptures
names(Ruptures)
StopData = Ruptures[which(Ruptures$part_id %in%parts),]
Stop_next_recovery = StopData[which(StopData$next_recovery<quantile(StopData$next_recovery,0.3,na.rm = TRUE)),c('part_id','next_recovery')]
Stop_next_recovery$next_recovery=paste(round(Stop_next_recovery$next_recovery * 100 / sum(StopData$next_recovery),0)," %")
Stop_next_recovery$classe="Stop"
Stop_next_recovery$issueCode="StopRecNext"
Stop_next_recovery$content=paste("Trop peu de reprise sur la section qui suit")
Stop_next_recovery$description=paste("Uniquement",Stop_next_recovery$next_recovery, "des reprises de la lecture sont faites sur la section qui suit celle-ci")
Stop_next_recovery$norm_value=" "
Stop_next_recovery$gravity = -1
Stop_next_recovery$suggestion_title="Revoir la section et la structuration"
Stop_next_recovery$suggestion_content=""
Stop_next_recovery
Stop_back_recovery = StopData[which(StopData$back_recovery>quantile(StopData$back_recovery,0.7,na.rm = TRUE)),c('part_id','back_recovery')]
Stop_back_recovery
StopData
names(StopData)
Stop_back_recovery = StopData[which(StopData$back_recovery>quantile(StopData$back_recovery,0.7,na.rm = TRUE)),c('part_id','back_recovery')]
names(StopData)
Stop_back_recovery = StopData[which(StopData$distant_prev_recovery>quantile(StopData$distant_prev_recovery,0.7,na.rm = TRUE)),c('part_id','back_recovery')]
Stop_back_recovery = StopData[which(StopData$distant_prev_recovery>quantile(StopData$distant_prev_recovery,0.7,na.rm = TRUE)),c('part_id','distant_prev_recovery')]
Stop_back_recovery
Stop_back_recovery = StopData[which(StopData$distant_prev_recovery>quantile(StopData$distant_prev_recovery,0.9,na.rm = TRUE)),c('part_id','distant_prev_recovery')]
Stop_back_recovery
Stop_back_recovery$back_recovery=round(Stop_back_recovery$distant_prev_recovery * 100 / sum(StopData$distant_prev_recovery),1)
Stop_back_recovery$back_recovery
Stop_distant_prev_recovery = StopData[which(StopData$distant_prev_recovery>quantile(StopData$distant_prev_recovery,0.9,na.rm = TRUE)),c('part_id','distant_prev_recovery')]
Stop_distant_prev_recovery$distant_prev_recovery=round(Stop_distant_prev_recovery$distant_prev_recovery * 100 / sum(StopData$distant_prev_recovery),1)
Stop_distant_prev_recovery
Stop_distant_prev_recovery = StopData[which(StopData$distant_prev_recovery>quantile(StopData$distant_prev_recovery,0.9,na.rm = TRUE)),c('part_id','distant_prev_recovery')]
Stop_distant_prev_recovery$distant_prev_recovery=round(Stop_distant_prev_recovery$distant_prev_recovery * 100 / sum(StopData$distant_prev_recovery),1)
Stop_distant_prev_recovery$classe="Stop"
Stop_distant_prev_recovery$issueCode="StopRecback"
Stop_distant_prev_recovery$content="de reprise sur des sections précédantes"
Stop_distant_prev_recovery$description=paste("Lors de la reprise de la lecture après une fin sur cette section,",Stop_distant_prev_recovery$distant_prev_recovery, "% des reprises se font sur une partie en arrière")
Stop_distant_prev_recovery$norm_value=" "
Stop_distant_prev_recovery$gravity = -1
Stop_distant_prev_recovery$suggestion_title="Revoir la section et la structuration"
Stop_distant_prev_recovery$suggestion_content=""
Stop_distant_prev_recovery = StopData[which(StopData$distant_prev_recovery>quantile(StopData$distant_prev_recovery,0.9,na.rm = TRUE)),c('part_id','distant_prev_recovery')]
Stop_distant_prev_recovery$distant_prev_recovery=round(Stop_distant_prev_recovery$distant_prev_recovery * 100 / sum(StopData$distant_prev_recovery),1)
Stop_distant_prev_recovery$classe="Stop"
Stop_distant_prev_recovery$issueCode="StopRecback"
Stop_distant_prev_recovery$content="de reprise sur des sections précédantes"
Stop_distant_prev_recovery$description=paste("Lors de la reprise de la lecture après une fin sur cette section,",Stop_distant_prev_recovery$distant_prev_recovery, "% des reprises se font sur une partie en arrière")
Stop_distant_prev_recovery$suggestion_title="Revoir la section et la structuration"
Stop_distant_prev_recovery$suggestion_content=""
FactDataPart
parts=unique(structure[which(structure$type=='title-3'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%parts),c('part_id','rupture')]
medianR = round(100* median(StopData$rupture)/sum(StopData$rupture),2)
byParts = StopData[which(StopData$rupture>quantile(StopData$rupture,0.9,na.rm = TRUE)),]
byParts$rupture=round(byParts$rupture * 100 / sum(StopData$rupture),1)
byParts$classe="Stop"
byParts$issueCode="StopRSEnd"
byParts$content=paste( "Trop de séances de lecture se terminent sur cette section")
byParts$description=paste(byParts$rupture, "% de fins de séances de lecture se passent sur cette section. La valeur moyenne pour les autres parties est de",medianR,"%")
byParts$suggestion_title="Réécrire et simplifier cette section"
byParts$suggestion_content="Cette section a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
chaps=unique(structure[which(structure$type=='title-2'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%chaps),c('part_id','rupture')]
medianR = round(100* median(StopData$rupture)/sum(StopData$rupture),2)
byChaps = StopData[which(StopData$rupture>quantile(StopData$rupture,0.9,na.rm = TRUE)),]
byChaps$rupture=round(byChaps$rupture * 100 / sum(StopData$rupture),1)
byChaps$classe="Stop"
byChaps$issueCode="StopRSEnd"
byChaps$content=paste( "Trop de séances de lecture se terminent sur ce chapitre")
byChaps$description=paste(byChaps$rupture, "% de fins de séances de lecture se passent sur ce chapitre. La valeur moyenne pour les autres chapitre est de",medianR,"%")
byChaps$suggestion_title="Réécrire et simplifier ce chapitre"
byChaps$suggestion_content="Ce chapitre a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
tomes=unique(structure[which(structure$type=='title-1'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%tomes),c('part_id','rupture')]
medianR = round(100* median(StopData$rupture)/sum(StopData$rupture),2)
byTomes = StopData[which(StopData$rupture>quantile(StopData$rupture,0.9,na.rm = TRUE)),]
byTomes$rupture=round(byTomes$rupture * 100 / sum(StopData$rupture),1)
byTomes$classe="Stop"
byTomes$issueCode="StopRSEnd"
byTomes$content=paste( "Trop de séances de lecture se terminent sur cette partie")
byTomes$description=paste(byTomes$rupture, "% de fins de séances de lecture se passent sur cette partie La valeur moyenne pour les autres parties est de",medianR,"%")
byTomes$suggestion_title="Réécrire et simplifier cette partie"
byTomes$suggestion_content="Cette partie a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
maxRStops =  rbind(byParts,byChaps,byTomes)
parts=unique(structure[which(structure$type=='title-3'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%parts),c('part_id','norecovery')]
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
byParts = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
byParts$norecovery=round(byParts$norecovery * 100 / sum(StopData$norecovery),1)
byParts$classe="Stop"
byParts$issueCode="StopRSExit"
byParts$content=paste("Trop d’arrêts définitifs de la lecture sur cette section")
byParts$description=paste(byParts$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette section. La valeur moyenne des arrêts définitifs sur les autres parties est de",medianR,"%")
byParts$suggestion_title="Réécrire et simplifier cette section"
byParts$suggestion_content="Ce chapitre a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
chaps=unique(structure[which(structure$type=='title-2'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%chaps),c('part_id','norecovery')]
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
byChaps = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
byChaps$norecovery=round(byChaps$norecovery * 100 / sum(StopData$norecovery),1)
byChaps$classe="Stop"
byChaps$issueCode="StopRSExit"
byChaps$content=paste("Trop d’arrêts définitifs de la lecture sur ce chapitre")
byChaps$description=paste(byChaps$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur ce chapitre.
La valeur moyenne des arrêts définitifs sur les autres chapitres est de",medianR,"%")
byChaps$suggestion_title="Réécrire et simplifier cet chapitre"
byChaps$suggestion_content="Ce chapitre a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
tomes=unique(structure[which(structure$type=='title-1'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%tomes),c('part_id','norecovery')]
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
byTomes = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
byTomes$norecovery=round(byTomes$norecovery * 100 / sum(StopData$norecovery),1)
byTomes$classe="Stop"
byTomes$issueCode="StopRSExit"
byTomes$content=paste("Trop d’arrêts définitifs de la lecture sur cette partie")
byTomes$description=paste(byTomes$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette partie.
La valeur moyenne des arrêts définitifs sur les autres partie est de",medianR,"%")
byTomes$suggestion_title="Réécrire et simplifier cette partie"
byTomes$suggestion_content=""
maxFinalStops =  rbind(byParts,byChaps,byTomes)
byTomes
tomes=unique(structure[which(structure$type=='title-1'),]$part_id)
StopData = Ruptures[which(Ruptures$part_id %in%tomes),c('part_id','norecovery')]
medianR = round(100* median(StopData$norecovery)/sum(StopData$norecovery),2)
byTomes = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
byTomes$norecovery=round(byTomes$norecovery * 100 / sum(StopData$norecovery),1)
byTomes$classe="Stop"
byTomes$issueCode="StopRSExit"
byTomes$content=paste("Trop d’arrêts définitifs de la lecture sur cette partie")
byTomes$description=paste(byTomes$norecovery, "des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette partie.
La valeur moyenne des arrêts définitifs sur les autres partie est de",medianR,"%")
byTomes$suggestion_title="Réécrire et simplifier cette partie"
byTomes$suggestion_content="Cette partie a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
maxFinalStops =  rbind(byParts,byChaps,byTomes)
names(minVisits)[c(1,2)]
names(minDuration)[c(1,2)]
names(maxDuration)[c(1,2)]
names(maxRereadings)[c(1,2)]
names(maxRereaders)[c(1,2)]
names(maxProvSHiftedNext)[c(1,2)]
names(maxProvSHiftedPast)[c(1,2)]
names(maxDestSHiftedPast)[c(1,2)]
names(maxDestSHiftedNext)[c(1,2)]
names(maxRStops)[c(1,2)]
names(maxStops)[c(1,2)]
names(minVisits)[c(1,2)]=
names(minDuration)[c(1,2)]=
names(maxDuration)[c(1,2)]=
names(maxRereadings)[c(1,2)]=
names(maxRereaders)[c(1,2)]=
names(maxProvSHiftedNext)[c(1,2)]=
names(maxProvSHiftedPast)[c(1,2)]=
names(maxDestSHiftedPast)[c(1,2)]=
names(maxDestSHiftedNext)[c(1,2)]=
names(maxRStops)[c(1,2)]=
names(maxStops)[c(1,2)]=c("id","value")
facts =
rbind(
minVisits,
minDuration,
maxDuration,
maxRereadings,
maxRereaders,
maxProvSHiftedNext,
maxProvSHiftedPast,
maxDestSHiftedPast,
maxDestSHiftedNext,
Rereads_Decaled_rereadings_max,
maxRStops,
maxFinalStops)
facts =
rbind(
minVisits,
minDuration,
maxDuration,
maxRereadings,
maxRereaders,
maxProvSHiftedNext,
maxProvSHiftedPast,
maxDestSHiftedPast,
maxDestSHiftedNext,
maxRStops,
maxFinalStops)
minVisits
names(minVisits)
names(minDuration)
names(maxDuration)
names(maxRereadings)
names(maxRereaders)
names(maxProvSHiftedNext)
names(maxProvSHiftedPast)
names(maxDestSHiftedPast)
names(maxDestSHiftedNext)
names(maxRStops)
names(maxFinalStops)
minDuration
maxDuration
maxRereadings
maxRereaders
maxProvSHiftedNext
maxProvSHiftedPast
rbind(
minVisits,
minDuration)
rbind(
minVisits,
minDuration,
maxDuration)
rbind(
minVisits,
minDuration,
maxDuration,
maxRereadings)
rbind(
minVisits,
minDuration,
maxDuration,
maxRereadings,
maxRereaders)
rbind(
minVisits,
minDuration,
maxDuration,
maxRereadings,
maxRereaders,
maxProvSHiftedNext)
rbind(
minVisits,
minDuration,
maxDuration,
maxRereadings,
maxRereaders,
maxProvSHiftedNext,
maxProvSHiftedPast)
rbind(
minVisits,
minDuration,
maxDuration,
maxRereadings,
maxRereaders,
maxProvSHiftedNext,
maxProvSHiftedPast,
maxDestSHiftedPast)
rbind(
minVisits,
minDuration,
maxDuration,
maxRereadings,
maxRereaders,
maxProvSHiftedNext,
maxProvSHiftedPast,
maxDestSHiftedPast,
maxDestSHiftedNext)
rbind(
minVisits,
minDuration,
maxDuration,
maxRereadings,
maxRereaders,
maxProvSHiftedNext,
maxProvSHiftedPast,
maxDestSHiftedPast,
maxDestSHiftedNext,
maxRStops)
rbind(
minVisits,
minDuration,
maxDuration,
maxRereadings,
maxRereaders,
maxProvSHiftedNext,
maxProvSHiftedPast,
maxDestSHiftedPast,
maxDestSHiftedNext,
maxRStops,
maxFinalStops)
maxFinalStops
names(maxFinalStops)
names(maxFinalStops)[c(1,2)]=c("id","value")
facts =
rbind(
minVisits,
minDuration,
maxDuration,
maxRereadings,
maxRereaders,
maxProvSHiftedNext,
maxProvSHiftedPast,
maxDestSHiftedPast,
maxDestSHiftedNext,
maxRStops,
maxFinalStops)
View(facts)
save(facts, file="nodejs.facts.rdata")
library('jsonlite')
library('reshape')
facts.json = toJSON(unname(split(facts, 1:nrow(facts))))
cat(facts.json, file="nodejs.facts.json")
View(facts)
names(facts)[1]
names(facts)[1]="part_id"
save(facts, file="nodejs.facts.rdata")
facts.json = toJSON(unname(split(facts, 1:nrow(facts))))
cat(facts.json, file="nodejs.facts.json")
load('PartData.rdata')
View(PartData)
