byChaps$classe="Actions_tx"
byChaps$issueCode="RminVisit"
byChaps$content="Trop peu de visites"
val = round(round(median(InterestData$Actions_tx,na.rm = TRUE),0)/ byChaps$Actions_tx,1)
byChaps$description=paste("Ce chapitre section est visité", val,"fois moins que le nombre médian de visites des autres chapitres")
byChaps$suggestion_title="Revoir le titre et le contenu"
byChaps$suggestion_content="Est-ce que le titre du chapitre  résume bien son contenu ?
Si oui :  Est-ce que ce chapitre est  réellement intéressant par rapport au cours ? Si c'est le cas, peut-il
être reformulé, voire intégré ailleurs dans le cours ?  Sinon, la supprimer et revoir le plan de la partie chapitre et du cours.
Le cas échéant, il faudrait penser à le reformuler"
InterestData = PartData[which(PartData$part_type=='partie'),]
byTomes = subset(InterestData, InterestData$Actions_tx<quantile(InterestData$Actions_tx,0.10,na.rm = TRUE), select=c(part_id,Actions_tx))
byTomes$classe="Readings"
byTomes$issueCode="RminVisit"
byTomes$content="Trop peu de visites"
val = round(round(median(InterestData$Actions_tx,na.rm = TRUE),0)/ byTomes$Actions_tx,1)
byTomes$description=paste("Cette partie est visitée", val,"fois moins que le nombre médian de visites des autres parties.")
byTomes$suggestion_title="Revoir le titre et le contenu"
byTomes$suggestion_content="Est-ce que le titre de la partie résume bien son contenu ?
Si oui :  Est-ce que cette partie est  réellement intéressante par rapport au cours ? Si c'est le cas, peut-elle
être reformulée, voire intégrée ailleurs dans le cours ?  Sinon, la supprimer et revoir le plan du cours.
Le cas échéant, il faudrait penser à la reformuler"
minVisits = rbind(byParts,byChaps,byTomes)
minVisits
nrow(minVisits)
nrows(minVisits)
DurationData = PartData[which(PartData$part_type=='section'),]
byParts = DurationData[which(DurationData$mean.duration<quantile(DurationData$mean.duration,0.10,na.rm = TRUE) ),]
byParts
byParts = DurationData[which(DurationData$mean.duration<quantile(DurationData$mean.duration,0.10,na.rm = TRUE) ),]
byParts$classe="Readings"
byParts$issueCode="RminDuration"
byParts$content="Temps de lecture trop court"
val = round(median(DurationData$mean.duration,na.rm = TRUE) / byParts$mean.duration,0)
byParts$description=paste("Cette section est plutôt survolée : son temps de lecture est",val,"fois inférieur au temps médian")
byParts$suggestion_title="Réviser ou supprimer la section"
byParts$suggestion_content="la section doit apporter plus d'informations nouvelles / intéressantes :
Si cette section est réellement nécessaire : peut-elle être reformulée, voire intégrée dans un autre chapitre ou une autre section du cours ?
Sinon, la supprimer et revoir le plan du chapitre et du cours."
byParts
DurationData = PartData[which(PartData$part_type=='section'),c('part_id','mean.duration')]
DurationData
DurationData = PartData[which(PartData$part_type=='section'),c('part_id','mean.duration')]
byParts = DurationData[which(DurationData$mean.duration<quantile(DurationData$mean.duration,0.10,na.rm = TRUE) ),]
byParts$classe="Readings"
byParts$issueCode="RminDuration"
byParts$content="Temps de lecture trop court"
val = round(median(DurationData$mean.duration,na.rm = TRUE) / byParts$mean.duration,0)
byParts$description=paste("Cette section est plutôt survolée : son temps de lecture est",val,"fois inférieur au temps médian")
byParts$suggestion_title="Réviser ou supprimer la section"
byParts$suggestion_content="la section doit apporter plus d'informations nouvelles / intéressantes :
Si cette section est réellement nécessaire : peut-elle être reformulée, voire intégrée dans un autre chapitre ou une autre section du cours ?
Sinon, la supprimer et revoir le plan du chapitre et du cours."
DurationData = PartData[which(PartData$part_type=='chapitre'),c('part_id','mean.duration')]
DurationData = PartData[which(PartData$part_type=='section'),c('part_id','mean.duration')]
byParts = DurationData[which(DurationData$mean.duration<quantile(DurationData$mean.duration,0.10,na.rm = TRUE) ),]
byParts$classe="mean.duration"
byParts$issueCode="RminDuration"
byParts$content="Temps de lecture trop court"
val = round(median(DurationData$mean.duration,na.rm = TRUE) / byParts$mean.duration,0)
byParts$description=paste("Cette section est plutôt survolée : son temps de lecture est",val,"fois inférieur au temps médian")
byParts$suggestion_title="Réviser ou supprimer la section"
byParts$suggestion_content="La section doit apporter plus d'informations nouvelles / intéressantes :
Si cette section est réellement nécessaire : peut-elle être reformulée, voire intégrée dans un autre chapitre ou une autre section du cours ?
Sinon, la supprimer et revoir le plan du chapitre et du cours."
byParts
DurationData = PartData[which(PartData$part_type=='chapitre'),c('part_id','mean.duration')]
byChaps = DurationData[which(DurationData$mean.duration<quantile(DurationData$mean.duration,0.10,na.rm = TRUE) ),]
byChaps$classe="mean.duration"
byChaps$issueCode="RminDuration"
byChaps$content="Temps de lecture trop court"
val = round(median(DurationData$mean.duration,na.rm = TRUE) / byChaps$mean.duration,0)
byChaps$description=paste("Ce chapitre est plutôt survolé : son temps de lecture est",val,"fois inférieur au temps médian")
byChaps$suggestion_title="Réviser ou supprimer le chapitre"
byChaps$suggestion_content="Le chapitre doit apporter plus d'informations nouvelles / intéressantes :
Si  le chapitre est réellement nécessaire : peut-il être reformulé, voire intégré dans un autre chapitre ou  partie du cours ?
Sinon, le supprimer et revoir le plan de la partie chapitre et du cours."
DurationData = PartData[which(PartData$part_type=='partie'),c('part_id','mean.duration')]
byTomes = DurationData[which(DurationData$mean.duration<quantile(DurationData$mean.duration,0.10,na.rm = TRUE) ),]
byTomes$classe="Readings"
byTomes = DurationData[which(DurationData$mean.duration<quantile(DurationData$mean.duration,0.10,na.rm = TRUE) ),]
byTomes$classe="mean.duration"
byTomes$issueCode="RminDuration"
byTomes$content="Temps de lecture trop court"
val = round(median(DurationData$mean.duration,na.rm = TRUE) / byTomes$mean.duration,0)
byTomes$description=paste("Cette partie est plutôt survolée : son temps de lecture est",val,"fois inférieur au temps médian")
byTomes$suggestion_title="Réviser ou supprimer la partie"
byTomes$suggestion_content="La partie doit apporter plus d'informations nouvelles / intéressantes :
Si la partie est réellement nécessaire : peut-elle être reformulée, voire intégrée dans une partie du cours ?
Sinon, la supprimer et revoir le plan du cours."
minDuration =  rbind(byParts,byChaps,byTomes)
minDuration
ReadsData  = PartData[which(PartData$part_type=='section'),c('part_id','rereadings_tx')]
ReadsData
ReadsData  = PartData[which(PartData$part_type=='section'),c('part_id','rereadings_tx')]
byParts = ReadsData[which(ReadsData$Rereadings>quantile(ReadsData$Rereadings,0.9,na.rm = TRUE)),]
ReadsData
byParts = ReadsData[which(ReadsData$rereadings_tx>quantile(ReadsData$rereadings_tx,0.9,na.rm = TRUE)),]
byParts
byParts$classe="rereadings_tx"
byParts$issueCode="RRmax"
byParts$content="Trop de relectures"
byParts$description=paste("Cette section est relue",byParts$rereadings_tx,"fois. Les autres sections sont en moyenne relues",round(median(byParts$rereadings_tx,na.rm = TRUE) ,0),"fois")
byParts$suggestion_title="Simplifier l'écriture de la section et vérifier l'enchainement"
byParts$suggestion_content="Vérifier les relectures conjointes et disjointes, si il y a globalement équilibre alors :
La section doit être plus simple à  lire et comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l'essentiel.
Sinon, regarder l’indicateur de relecture plus spécifique (même séance ou séances disjointes) pour suggestion"
byParts
byChaps$content="Trop de relectures"
round(byParts$rereadings_tx/median(byParts$rereadings_tx),2)
median(byParts$rereadings_tx)
byParts$rereadings_tx
quantile(ReadsData$rereadings_tx,0.9,na.rm = TRUE)
quantile(ReadsData$rereadings_tx,0.6,na.rm = TRUE)
quantile(ReadsData$rereadings_tx,0.2,na.rm = TRUE)
ReadsData  = PartData[which(PartData$part_type=='section'),c('part_id','rereadings_tx')]
byParts = ReadsData[which(ReadsData$rereadings_tx>quantile(ReadsData$rereadings_tx,0.9,na.rm = TRUE)),]
byParts$rereadings_tx
byParts$rereadings_tx/median(byParts$rereadings_tx)
median(byParts$rereadings_tx)
class(byParts$rereadings_tx)
median(ReadsData$rereadings_tx)
round(byParts$rereadings_tx/median(ReadsData$rereadings_tx),2)
ReadsData  = PartData[which(PartData$part_type=='section'),c('part_id','rereadings_tx')]
byParts = ReadsData[which(ReadsData$rereadings_tx>quantile(ReadsData$rereadings_tx,0.9,na.rm = TRUE)),]
byParts$classe="rereadings_tx"
byParts$issueCode="RRmax"
byParts$content="Trop de relectures"
byParts$description=paste("Cette section est  en moyenne relue",round(byParts$rereadings_tx/median(ReadsData$rereadings_tx),2),"fois. Les autres sections sont en moyenne relues",round(median(byParts$rereadings_tx,na.rm = TRUE) ,0),"fois")
round(byParts$rereadings_tx/median(ReadsData$rereadings_tx),2)
byParts$description=paste("Cette section est  en moyenne relue",round(byParts$rereadings_tx/median(ReadsData$rereadings_tx),2),"fois. Les autres sections sont en moyenne relues",round(median(byParts$rereadings_tx,na.rm = TRUE) ,0),"fois")
byParts$suggestion_title="Simplifier l'écriture de la section et vérifier l'enchainement"
byParts$suggestion_content="Vérifier les relectures conjointes et disjointes, si il y a globalement équilibre alors :
La section doit être plus simple à  lire et comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l'essentiel.
Sinon, regarder l’indicateur de relecture plus spécifique (même séance ou séances disjointes) pour suggestion"
ReadsData  = PartData[which(PartData$part_type=='chapitre'),c('part_id','rereadings_tx')]
byChaps = ReadsData[which(ReadsData$rereadings_tx>quantile(ReadsData$rereadings_tx,0.9,na.rm = TRUE)),]
byChaps
byChaps$description=$description=paste("Les sections de ce chapitres sont en moyenne relues",round(byChaps$rereadings_tx/median(ReadsData$rereadings_tx),2),"fois plus que le nombre moyen de relectures des sections des autres chapitres")
byChaps$description=paste("Les sections de ce chapitres sont en moyenne relues",round(byChaps$rereadings_tx/median(ReadsData$rereadings_tx),2),"fois plus que le nombre moyen de relectures des sections des autres chapitres")
byChaps$suggestion_title="Simplifier l'écriture du chapitre et vérifier l'enchainement des sections"
byChaps$suggestion_content="Vérifier les relectures conjointes et disjointes, si il y a globalement équilibre alors :
Le chapitre et ses sections doivent être plus simples à  lire et comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à  l’essentiel.
Sinon, regarder l’indicateur de relecture plus spécifique (même séance ou séances disjointes) pour suggestion"
ReadsData = PartData[which(PartData$part_type=='partie'),c('part_id','rereadings_tx')]
byTomes = ReadsData[which(ReadsData$Rereadings>quantile(ReadsData$Rereadings,0.9,na.rm = TRUE)),]
ReadsData = PartData[which(PartData$part_type=='partie'),c('part_id','rereadings_tx')]
byTomes = ReadsData[which(ReadsData$Rereadings>quantile(ReadsData$Rereadings,0.9,na.rm = TRUE)),]
byChaps$description=paste("Les sections de ce chapitre sont en moyenne relues",round(byChaps$rereadings_tx/median(ReadsData$rereadings_tx),2),"fois plus que le nombre moyen de relectures des sections des autres chapitres")
ReadsData  = PartData[which(PartData$part_type=='chapitre'),c('part_id','rereadings_tx')]
byChaps = ReadsData[which(ReadsData$rereadings_tx>quantile(ReadsData$rereadings_tx,0.9,na.rm = TRUE)),]
byChaps$classe="rereadings_tx"
byChaps$issueCode="RRmax"
byChaps$content="Trop de relectures"
byChaps$description=paste("Les sections de ce chapitre sont en moyenne relues",round(byChaps$rereadings_tx/median(ReadsData$rereadings_tx),2),"fois plus que le nombre moyen de relectures des sections des autres chapitres")
byChaps$suggestion_title="Simplifier l'écriture du chapitre et vérifier l'enchainement des sections"
byChaps$suggestion_content="Vérifier les relectures conjointes et disjointes, si il y a globalement équilibre alors :
Le chapitre et ses sections doivent être plus simples à  lire et comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à  l’essentiel.
Sinon, regarder l’indicateur de relecture plus spécifique (même séance ou séances disjointes) pour suggestion"
ReadsData = PartData[which(PartData$part_type=='partie'),c('part_id','rereadings_tx')]
byTomes = ReadsData[which(ReadsData$rereadings_tx>quantile(ReadsData$rereadings_tx,0.9,na.rm = TRUE)),]
byTomes$classe="rereadings_tx"
byTomes$issueCode="RRmax"
byTomes$content="Trop de relectures"
byTomes$description=paste("Les sections de cette partie sont en moyenne relues",round(byTomes$rereadings_tx/median(ReadsData$rereadings_tx),2),"fois plus que le nombre moyen de relectures des sections des autres parties")
byTomes$suggestion_title="Simplifier l'écriture de la partie et vérifier l'enchainement de ses chapitres"
byTomes$suggestion_content="Vérifier les relectures conjointes et disjointes, si il y a globalement équilibre alors :
La partie  et ses chapitres et sections doivent être plus simples à  lire et comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à  l’essentiel.
Sinon, regarder l’indicateur de relecture plus spécifique (même séance ou séances disjointes) pour suggestion"
maxRereadings =  rbind(byParts,byChaps,byTomes)
StopData = PartData[which(PartData$part_type=='partie'),c('part_id','norecovery_tx')]
StopData
StopData = PartData[which(PartData$part_type=='section'),c('part_id','norecovery_tx')]
byParts = StopData[which(StopData$norecovery>quantile(StopData$norecovery,0.9,na.rm = TRUE)),]
byParts = StopData[which(StopData$norecovery_tx>quantile(StopData$norecovery_tx,0.9,na.rm = TRUE)),]
byParts
byParts$classe="norecovery_tx"
byParts$issueCode="StopRSExit"
byParts$content=paste("Trop d’arrêts définitifs de la lecture sur cette section")
byParts$description=paste(round(100*byParts$norecovery,2), "% des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette section. La valeur moyenne des arrêts définitifs sur les autres parties est de",medianR,"%")
round(100*byParts$norecovery_tx,2)
StopData = PartData[which(PartData$part_type=='section'),c('part_id','norecovery_tx')]
byParts = StopData[which(StopData$norecovery_tx>quantile(StopData$norecovery_tx,0.9,na.rm = TRUE)),]
byParts$classe="norecovery_tx"
byParts$issueCode="StopRSExit"
byParts$content=paste("Trop d’arrêts définitifs de la lecture sur cette section")
byParts$description=paste(round(100*byParts$norecovery_tx,2), "% des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette section. La valeur moyenne des arrêts définitifs sur les autres parties est de",medianR,"%")
byParts$description=paste(round(100*byParts$norecovery_tx,2), "% des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette section. ")
byParts$suggestion_title="Réécrire et simplifier cette section"
byParts$suggestion_title="Réécrire et simplifier cette section"
byParts$suggestion_content="Cette section a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
StopData = PartData[which(PartData$part_type=='chapitre'),c('part_id','norecovery_tx')]
StopData = PartData[which(PartData$part_type=='chapitre'),c('part_id','norecovery_tx')]
byChaps = StopData[which(StopData$norecovery_tx>quantile(StopData$norecovery_tx,0.9,na.rm = TRUE)),]
byChaps$classe="norecovery_tx"
byChaps$issueCode="StopRSExit"
byChaps$content=paste("Trop d’arrêts définitifs de la lecture sur ce chapitre")
byChaps$description=paste(round(100*byChaps$norecovery_tx,2), "% des fins définitives de la lecture  (sans reprises ultérieures) se passent sur ce chapitre.
La valeur moyenne des arrêts définitifs sur les autres chapitres est de",medianR,"%")
byChaps$description=paste(round(100*byChaps$norecovery_tx,2), "% des fins définitives de la lecture  (sans reprises ultérieures) se passent sur ce chapitre.")
round(100*byChaps$norecovery_tx,2)
byChaps$description=paste(round(100*byChaps$norecovery_tx,2), "% des fins définitives de la lecture  (sans reprises ultérieures) se passent sur ce chapitre.")
byChaps$suggestion_title="Réécrire et simplifier ce chapitre"
byChaps$suggestion_content="Ce chapitre a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
StopData = PartData[which(PartData$part_type=='partie'),c('part_id','norecovery_tx')]
byTomes = StopData[which(StopData$norecovery_tx>quantile(StopData$norecovery_tx,0.9,na.rm = TRUE)),]
byTomes$classe="norecovery_tx"
byTomes$issueCode="StopRSExit"
byTomes$content=paste("Trop d’arrêts définitifs de la lecture sur cette partie")
byTomes$description=paste(round(100*byTomes$norecovery), "% des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette partie.")
byTomes$description=paste(round(100*byTomes$norecovery_tx), "% des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette partie.")
byTomes$suggestion_title="Réécrire et simplifier cette partie"
byTomes$suggestion_content="Cette partie a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
maxFinalStops =  rbind(byParts,byChaps,byTomes)
names(minVisits)[c(1,2)]=
names(minDuration)[c(1,2)]=
names(maxRereadings)[c(1,2)]=
names(maxRStops)[c(1,2)]=
names(maxFinalStops)[c(1,2)]=c("id","value")
names(minVisits)[c(1,2)]=
names(minDuration)[c(1,2)]=
names(maxRereadings)[c(1,2)]=
names(maxFinalStops)[c(1,2)]=c("id","value")
names(minVisits)[c(1,2)]=
names(minDuration)[c(1,2)]=
names(maxRereadings)[c(1,2)]=
names(maxFinalStops)[c(1,2)]=c("part_id","value")
facts =
rbind(
minVisits,
minDuration,
maxRereadings,
maxFinalStops)
library('jsonlite')
library('reshape')
facts.json = toJSON(unname(split(facts, 1:nrow(facts))))
cat(facts.json, file="nodejs.facts.json")
View(facts)
InterestData = PartData[which(PartData$part_type=='section'),]
round(round(median(InterestData$Actions_nb,na.rm = TRUE),0)/ byParts$Actions_tx,1)
byParts = subset(InterestData, InterestData$Actions_tx<quantile(InterestData$Actions_tx,0.10,na.rm = TRUE), select=c(part_id,Actions_tx))
byParts$classe="Actions_tx"
byParts$issueCode="RminVisit"
byParts$content="Trop peu de visites"
val = round(round(median(InterestData$Actions_nb,na.rm = TRUE),0)/ byParts$Actions_tx,1)
val
val = round(round(median(InterestData$Actions_tx,na.rm = TRUE),0)/ byChaps$Actions_tx,1)
val
val = round(median(InterestData$Actions_tx,na.rm = TRUE)/ byChaps$Actions_tx,1)
val
median(InterestData$Actions_tx,na.rm = TRUE)
byChaps$Actions_tx
byChaps = subset(InterestData, InterestData$Actions_tx<quantile(InterestData$Actions_tx,0.10,na.rm = TRUE), select=c(part_id,Actions_tx))
InterestData = PartData[which(PartData$part_type=='chapitre'),]
byChaps = subset(InterestData, InterestData$Actions_tx<quantile(InterestData$Actions_tx,0.10,na.rm = TRUE), select=c(part_id,Actions_tx))
byChaps$classe="Actions_tx"
byChaps$issueCode="RminVisit"
byChaps$content="Trop peu de visites"
val = round(median(InterestData$Actions_tx,na.rm = TRUE)/ byChaps$Actions_tx,1)
val
val = round(median(InterestData$Actions_tx,na.rm = TRUE)/ byParts$Actions_tx,1)
val = round(median(InterestData$Actions_tx,na.rm = TRUE)/ byParts$Actions_tx,1)
val
byParts = subset(InterestData, InterestData$Actions_tx<quantile(InterestData$Actions_tx,0.10,na.rm = TRUE), select=c(part_id,Actions_tx))
byParts$classe="Actions_tx"
byParts$issueCode="RminVisit"
val = round(median(InterestData$Actions_tx,na.rm = TRUE)/ byParts$Actions_tx,1)
byParts$content="Trop peu de visites"
val
InterestData = PartData[which(PartData$part_type=='section'),]
byParts = subset(InterestData, InterestData$Actions_tx<quantile(InterestData$Actions_tx,0.10,na.rm = TRUE), select=c(part_id,Actions_tx))
byParts$classe="Actions_tx"
byParts$issueCode="RminVisit"
byParts$content="Trop peu de visites"
val = round(median(InterestData$Actions_tx,na.rm = TRUE)/ byParts$Actions_tx,1)
val
InterestData = PartData[which(PartData$part_type=='section'),]
byParts = subset(InterestData, InterestData$Actions_tx<quantile(InterestData$Actions_tx,0.10,na.rm = TRUE), select=c(part_id,Actions_tx))
byParts$classe="Actions_tx"
byParts$issueCode="RminVisit"
byParts$content="Trop peu de visites"
val = round(median(InterestData$Actions_tx,na.rm = TRUE)/ byParts$Actions_tx,1)
byParts$description=paste("cette section est visitée", val,"fois moins que le nombre moyen de visites des autres sections")
byParts$suggestion_title="Revoir le titre et le contenu"
byParts$suggestion_content="Est-ce que le titre de la section résume bien son contenu ?
Si oui :  Est-ce que cette section est  réellement intéressante par rapport au cours ? Si c'est le cas, peut-elle
être reformulée, voire intégrée ailleurs dans le cours ?  Sinon, la supprimer et revoir le plan du chapitre et du cours.
Le cas échéant, il faudrait penser à le reformuler"
InterestData = PartData[which(PartData$part_type=='chapitre'),]
InterestData = PartData[which(PartData$part_type=='chapitre'),]
byChaps = subset(InterestData, InterestData$Actions_tx<quantile(InterestData$Actions_tx,0.10,na.rm = TRUE), select=c(part_id,Actions_tx))
byChaps$classe="Actions_tx"
byChaps$issueCode="RminVisit"
byChaps$content="Trop peu de visites"
val = round(median(InterestData$Actions_tx,na.rm = TRUE)/ byChaps$Actions_tx,1)
val
byChaps$description=paste("Ce chapitre section est visité", val,"fois moins que le nombre médian de visites des autres chapitres")
byChaps$suggestion_title="Revoir le titre et le contenu"
byChaps$suggestion_content="Est-ce que le titre du chapitre  résume bien son contenu ?
Si oui :  Est-ce que ce chapitre est  réellement intéressant par rapport au cours ? Si c'est le cas, peut-il
être reformulé, voire intégré ailleurs dans le cours ?  Sinon, la supprimer et revoir le plan de la partie chapitre et du cours.
Le cas échéant, il faudrait penser à le reformuler"
InterestData = PartData[which(PartData$part_type=='partie'),]
byTomes = subset(InterestData, InterestData$Actions_tx<quantile(InterestData$Actions_tx,0.10,na.rm = TRUE), select=c(part_id,Actions_tx))
byTomes$classe="Actions_tx"
byTomes$issueCode="RminVisit"
byTomes$content="Trop peu de visites"
val = round(median(InterestData$Actions_tx,na.rm = TRUE)/ byTomes$Actions_tx,1)
val
byTomes$description=paste("Cette partie est visitée", val,"fois moins que le nombre médian de visites des autres parties.")
byTomes$suggestion_title="Revoir le titre et le contenu"
byTomes$suggestion_content="Est-ce que le titre de la partie résume bien son contenu ?
Si oui :  Est-ce que cette partie est  réellement intéressante par rapport au cours ? Si c'est le cas, peut-elle
être reformulée, voire intégrée ailleurs dans le cours ?  Sinon, la supprimer et revoir le plan du cours.
Le cas échéant, il faudrait penser à la reformuler"
minVisits = rbind(byParts,byChaps,byTomes)
minVisits
view(minVisits)
View(minVisits)
byParts$description=paste("Cette section est visitée", val,"fois moins que le nombre moyen de visites des autres sections")
minVisits = rbind(byParts,byChaps,byTomes)
View(minVisits)
DurationData = PartData[which(PartData$part_type=='section'),c('part_id','mean.duration')]
byParts = DurationData[which(DurationData$mean.duration<quantile(DurationData$mean.duration,0.10,na.rm = TRUE) ),]
byParts
byParts$classe="mean.duration"
byParts$issueCode="RminDuration"
byParts$content="Temps de lecture trop court"
val = round(median(DurationData$mean.duration,na.rm = TRUE) / byParts$mean.duration,0)
byParts$description=paste("Cette section est plutôt survolée : son temps de lecture est",val,"fois inférieur au temps médian")
byParts$suggestion_title="Réviser ou supprimer la section"
byParts$suggestion_content="La section doit apporter plus d'informations nouvelles / intéressantes :
Si cette section est réellement nécessaire : peut-elle être reformulée, voire intégrée dans un autre chapitre ou une autre section du cours ?
Sinon, la supprimer et revoir le plan du chapitre et du cours."
DurationData = PartData[which(PartData$part_type=='chapitre'),c('part_id','mean.duration')]
byChaps = DurationData[which(DurationData$mean.duration<quantile(DurationData$mean.duration,0.10,na.rm = TRUE) ),]
byChaps$classe="mean.duration"
byChaps$issueCode="RminDuration"
byChaps$content="Temps de lecture trop court"
val = round(median(DurationData$mean.duration,na.rm = TRUE) / byChaps$mean.duration,0)
byChaps$description=paste("Ce chapitre est plutôt survolé : son temps de lecture est",val,"fois inférieur au temps médian")
byChaps$suggestion_title="Réviser ou supprimer le chapitre"
byChaps$suggestion_content="Le chapitre doit apporter plus d'informations nouvelles / intéressantes :
Si  le chapitre est réellement nécessaire : peut-il être reformulé, voire intégré dans un autre chapitre ou  partie du cours ?
Sinon, le supprimer et revoir le plan de la partie chapitre et du cours."
DurationData = PartData[which(PartData$part_type=='partie'),c('part_id','mean.duration')]
byTomes = DurationData[which(DurationData$mean.duration<quantile(DurationData$mean.duration,0.10,na.rm = TRUE) ),]
byTomes$issueCode="RminDuration"
byTomes$content="Temps de lecture trop court"
byTomes$classe="mean.duration"
val = round(median(DurationData$mean.duration,na.rm = TRUE) / byTomes$mean.duration,0)
byTomes$description=paste("Cette partie est plutôt survolée : son temps de lecture est",val,"fois inférieur au temps médian")
byTomes$suggestion_title="Réviser ou supprimer la partie"
byTomes$suggestion_content="La partie doit apporter plus d'informations nouvelles / intéressantes :
Si la partie est réellement nécessaire : peut-elle être reformulée, voire intégrée dans une partie du cours ?
Sinon, la supprimer et revoir le plan du cours."
minDuration =  rbind(byParts,byChaps,byTomes)
minDuration
View(minDuration)
ReadsData  = PartData[which(PartData$part_type=='section'),c('part_id','rereadings_tx')]
byParts = ReadsData[which(ReadsData$rereadings_tx>quantile(ReadsData$rereadings_tx,0.9,na.rm = TRUE)),]
byParts$classe="rereadings_tx"
byParts$issueCode="RRmax"
byParts$content="Trop de relectures"
byParts$description=paste("Cette section est  en moyenne relue",round(byParts$rereadings_tx/median(ReadsData$rereadings_tx),2),"fois plus que le nombre moyen de relecture des autres sections")
byParts$suggestion_title="Simplifier l'écriture de la section et vérifier l'enchainement"
byParts$suggestion_content="Vérifier les relectures conjointes et disjointes, si il y a globalement équilibre alors :
La section doit être plus simple à  lire et comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l'essentiel.
Sinon, regarder l’indicateur de relecture plus spécifique (même séance ou séances disjointes) pour suggestion"
ReadsData  = PartData[which(PartData$part_type=='chapitre'),c('part_id','rereadings_tx')]
byChaps = ReadsData[which(ReadsData$rereadings_tx>quantile(ReadsData$rereadings_tx,0.9,na.rm = TRUE)),]
byChaps$classe="rereadings_tx"
byChaps$issueCode="RRmax"
byChaps$content="Trop de relectures"
byChaps$description=paste("Les sections de ce chapitre sont en moyenne relues",round(byChaps$rereadings_tx/median(ReadsData$rereadings_tx),2),"fois plus que le nombre moyen de relectures des sections des autres chapitres")
byChaps$suggestion_title="Simplifier l'écriture du chapitre et vérifier l'enchainement des sections"
byChaps$suggestion_content="Vérifier les relectures conjointes et disjointes, si il y a globalement équilibre alors :
Le chapitre et ses sections doivent être plus simples à  lire et comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à  l’essentiel.
Sinon, regarder l’indicateur de relecture plus spécifique (même séance ou séances disjointes) pour suggestion"
byTomes = ReadsData[which(ReadsData$rereadings_tx>quantile(ReadsData$rereadings_tx,0.9,na.rm = TRUE)),]
byTomes$issueCode="RRmax"
byTomes$suggestion_title="Simplifier l'écriture de la partie et vérifier l'enchainement de ses chapitres"
byTomes$suggestion_content="Vérifier les relectures conjointes et disjointes, si il y a globalement équilibre alors :
byTomes$classe="rereadings_tx"
La partie  et ses chapitres et sections doivent être plus simples à  lire et comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
byTomes$content="Trop de relectures"
byTomes$description=paste("Les sections de cette partie sont en moyenne relues",round(byTomes$rereadings_tx/median(ReadsData$rereadings_tx),2),"fois plus que le nombre moyen de relectures des sections des autres parties")
ReadsData = PartData[which(PartData$part_type=='partie'),c('part_id','rereadings_tx')]
ReadsData = PartData[which(PartData$part_type=='partie'),c('part_id','rereadings_tx')]
byTomes = ReadsData[which(ReadsData$rereadings_tx>quantile(ReadsData$rereadings_tx,0.9,na.rm = TRUE)),]
byTomes$classe="rereadings_tx"
byTomes$issueCode="RRmax"
byTomes$content="Trop de relectures"
byTomes$description=paste("Les sections de cette partie sont en moyenne relues",round(byTomes$rereadings_tx/median(ReadsData$rereadings_tx),2),"fois plus que le nombre moyen de relectures des sections des autres parties")
byTomes$suggestion_title="Simplifier l'écriture de la partie et vérifier l'enchainement de ses chapitres"
byTomes$suggestion_content="Vérifier les relectures conjointes et disjointes, si il y a globalement équilibre alors :
La partie  et ses chapitres et sections doivent être plus simples à  lire et comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à  l’essentiel.
Sinon, regarder l’indicateur de relecture plus spécifique (même séance ou séances disjointes) pour suggestion"
maxRereadings =  rbind(byParts,byChaps,byTomes)
view(maxRereadings)
View(maxRereadings)
StopData = PartData[which(PartData$part_type=='section'),c('part_id','norecovery_tx')]
byParts = StopData[which(StopData$norecovery_tx>quantile(StopData$norecovery_tx,0.9,na.rm = TRUE)),]
byParts$classe="norecovery_tx"
byParts$issueCode="StopRSExit"
byParts$content=paste("Trop d’arrêts définitifs de la lecture sur cette section")
byParts$description=paste(round(100*byParts$norecovery_tx,2), "% des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette section. ")
byParts$suggestion_title="Réécrire et simplifier cette section"
byParts$suggestion_content="Cette section a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
StopData = PartData[which(PartData$part_type=='chapitre'),c('part_id','norecovery_tx')]
byChaps = StopData[which(StopData$norecovery_tx>quantile(StopData$norecovery_tx,0.9,na.rm = TRUE)),]
byChaps$classe="norecovery_tx"
byChaps$issueCode="StopRSExit"
byChaps$content=paste("Trop d’arrêts définitifs de la lecture sur ce chapitre")
byChaps$description=paste(round(100*byChaps$norecovery_tx,2), "% des fins définitives de la lecture  (sans reprises ultérieures) se passent sur ce chapitre.")
byChaps$suggestion_title="Réécrire et simplifier ce chapitre"
byChaps$suggestion_content="Ce chapitre a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
StopData = PartData[which(PartData$part_type=='partie'),c('part_id','norecovery_tx')]
byTomes = StopData[which(StopData$norecovery_tx>quantile(StopData$norecovery_tx,0.9,na.rm = TRUE)),]
byTomes$classe="norecovery_tx"
byTomes$issueCode="StopRSExit"
byTomes$content=paste("Trop d’arrêts définitifs de la lecture sur cette partie")
byTomes$description=paste(round(100*byTomes$norecovery_tx), "% des fins définitives de la lecture  (sans reprises ultérieures) se passent sur cette partie.")
byTomes$suggestion_title="Réécrire et simplifier cette partie"
byTomes$suggestion_content="Cette partie a besoin d\'être plus simple à lire et à comprendre :
- utiliser un vocabulaire plus commun ou directement défini dans le texte,
- vérifier l'enchaînement logique des propos
- ajouter des exemples/analogies pour améliorer la compréhension
- éviter les dispersions : aller à l\'essentiel"
maxFinalStops =  rbind(byParts,byChaps,byTomes)
maxFinalStops
View(maxFinalStops)
names(minVisits)[c(1,2)]=
names(minDuration)[c(1,2)]=
names(maxRereadings)[c(1,2)]=
names(maxFinalStops)[c(1,2)]=c("part_id","value")
facts =
rbind(
minVisits,
minDuration,
maxRereadings,
maxFinalStops)
save(facts, file="nodejs.facts.rdata")
names(minVisits)[c(1,2)]=
names(minDuration)[c(1,2)]=
names(maxRereadings)[c(1,2)]=
names(maxFinalStops)[c(1,2)]=c("part_id","value")
facts =
rbind(
minVisits,
minDuration,
maxRereadings,
maxFinalStops)
save(facts, file="facts.rdata")
library('jsonlite')
library('reshape')
facts.json = toJSON(unname(split(facts, 1:nrow(facts))))
cat(facts.json, file="nodejs.facts.json")
cat(facts.json, file="facts.json")
