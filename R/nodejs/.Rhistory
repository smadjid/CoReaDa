load("~/dev/R/nodejs/PartData.rdata")
View(PartData)
mean(PartData$q3.duration, na.rm=TRUE)
median(PartData$q3.duration, na.rm=TRUE)
median(PartData$q3.duration, na.rm=TRUE)/60
load("~/dev/R/nodejs/course.structure.rdata")
load("~/dev/R/nodejs/PartData.rdata")
View(PartData)
help.start()
ls()
options(stringsAsFactors=FALSE)
setwd("~/dev/CoReaDa/R/nodejs")
selectedCourse='nodejs'
load(paste(selectedCourse,"rdata",sep="."))
load(paste(selectedCourse,"structure.rdata",sep="."))
load(paste(selectedCourse,"Interest.rdata",sep="."))
load(paste(selectedCourse,"Reads.rdata",sep="."))
load(paste(selectedCourse,"Ruptures.rdata",sep="."))
load(paste(selectedCourse,"RS.rdata",sep="."))
load(paste(selectedCourse,"partFollow.rdata",sep="."))
load(paste(selectedCourse,"achievement.rdata",sep="."))
load('PartData.rdata')
View(PartData)
PartData=unique(PartData)
View(PartData)
chaptersId = PartData[which(PartData$part_type=='section'),c('part_index','part_parent')]
chaptersId
chaptersId[order(chaptersId$part_index)]
chaptersId[order(chaptersId$part_index),]
chaptersId = chaptersId[order(chaptersId$part_index),]
chaptersId$id = 1:nrow(chaptersId)
chaptersId
chaptersId = PartData[which(PartData$part_type=='section'),c('part_index','part_parent')]
chaptersId = chaptersId[order(chaptersId$part_index),]
chaptersId = unique(chaptersId[,-c(1)])
chaptersId
chaptersId$id = 1:nrow(chaptersId)
chaptersId = PartData[which(PartData$part_type=='section'),c('part_index','part_parent')]
chaptersId = chaptersId[order(chaptersId$part_index),]
chaptersId$id = 0
chaptersId = unique(chaptersId[,-c(1)])
chaptersId
chaptersId$id = 1:nrow(chaptersId)
chaptersId
i=1
PartData[which(PartData$part_index==chaptersId$part_parent[i]),]
PartData$part_index
PartData[which(PartData$part_id==chaptersId$part_parent[i]),]
for(i in 1:nrow(chaptersId))
{
PartData[which(PartData$part_id==chaptersId$part_parent[i]),]$part_index = chaptersId$id[i]
}
tomesId = PartData[which(PartData$part_type=='chapitre'),c('part_index','part_parent')]
tomesId
tomesId = tomesId[order(tomesId$part_index),]
tomesId
tomesId$id = 0
tomesId = unique(tomesId[,-c(1)])
tomesId
tomesId$id = 1:nrow(tomesId)
for(i in 1:nrow(tomesId))
{
PartData[which(PartData$part_id==tomesId$part_parent[i]),]$part_index = tomesId$id[i]
}
save(PartData, file='PartData.rdata')
colnames(PartData)[1]="id"
meltParts=melt(PartData, id.vars = 'id')
library('jsonlite')
library('reshape')
colnames(PartData)[1]="id"
meltParts=melt(PartData, id.vars = 'id')
PartsData.json = toJSON(unname(split(meltParts,1:nrow(meltParts))))
cat(PartsData.json, file="structure.json")
getwd()
unique(PartData$part_type)
PartData[which(PartData$part_type=='chapitre'),]$part_index
PartData$part_type
names(PartData)[1]=c('part_index')
PartData[which(PartData$part_type=='chapitre'),]$part_index
PartData[which(PartData$part_type=='chapitre'),]$part_index = paste('Chapitre ',PartData[which(PartData$part_type=='chapitre'),]$part_index )
PartData[which(PartData$part_type=='chapitre'),]$part_index
PartData[which(PartData$part_type=='partie'),]$part_index
PartData[which(PartData$part_type=='partie'),]$part_index = paste('Partie ',PartData[which(PartData$part_type=='chapitre'),]$part_index )
PartData[which(PartData$part_type=='partie'),]$part_index
PartData[which(PartData$part_type=='partie'),]$part_index = paste('Partie ',PartData[which(PartData$part_type=='partie'),]$part_index )
save(PartData, file='PartData.rdata')
colnames(PartData)[1]="id"
meltParts=melt(PartData, id.vars = 'id')
PartsData.json = toJSON(unname(split(meltParts,1:nrow(meltParts))))
cat(PartsData.json, file="structure.json")
maxIndex= max(PartData$part_index)
maxIndex= max(PartData$id)
maxIndex
maxIndex= max(PartData[which(PartData$part_type=='section'),]$part_index)
PartData[which(PartData$part_type=='section'),]
PartData[which(PartData$part_type=='section'),]$part_index
PartData[which(PartData$part_type=='section'),]$
id
names(facts)[1]="part_index"
names(PartData)[1]="part_index"
maxIndex= max(PartData[which(PartData$part_type=='section'),]$part_index)
maxIndex
maxIndex= max(as.numeric(PartData[which(PartData$part_type=='section'),]$part_index))
maxIndex
chaptersId$id = (maxIndex+1):(maxIndex+nrow(chaptersId))
chaptersId$id
chaptersId = PartData[which(PartData$part_type=='section'),c('part_index','part_parent')]
chaptersId = chaptersId[order(chaptersId$part_index),]
chaptersId$id = 0
chaptersId = unique(chaptersId[,-c(1)])
chaptersId$id = (maxIndex+1):(maxIndex+nrow(chaptersId))
for(i in 1:nrow(chaptersId))
{
PartData[which(PartData$part_id==chaptersId$part_parent[i]),]$part_index = chaptersId$id[i]
}
maxIndex= max(PartData[which(PartData$part_type=='chapitre'),]$part_index)
maxIndex
maxIndex= max(as.numeric(PartData[which(PartData$part_type=='chapitre'),]$part_index))
maxIndex
tomesId = PartData[which(PartData$part_type=='chapitre'),c('part_index','part_parent')]
tomesId = tomesId[order(tomesId$part_index),]
tomesId$id = 0
tomesId = unique(tomesId[,-c(1)])
tomesId
tomesId$id = (maxIndex+1):(maxIndex+nrow(tomesId))
tomesId$id
for(i in 1:nrow(tomesId))
{
PartData[which(PartData$part_id==tomesId$part_parent[i]),]$part_index = tomesId$id[i]
}
colnames(PartData)[1]="id"
meltParts=melt(PartData, id.vars = 'id')
PartsData.json = toJSON(unname(split(meltParts,1:nrow(meltParts))))
cat(PartsData.json, file="structure.json")
chaptersId = PartData[which(PartData$part_type=='section'),c('part_index','part_parent')]
chaptersId = chaptersId[order(chaptersId$part_index),]
chaptersId$id = 0
chaptersId = unique(chaptersId[,-c(1)])
chaptersId$id = -1:(-nrow(chaptersId))
for(i in 1:nrow(chaptersId))
{
PartData[which(PartData$part_id==chaptersId$part_parent[i]),]$part_index = chaptersId$id[i]
}
chaptersId = PartData[which(PartData$part_type=='section'),c('part_index','part_parent')]
names(PartData)[1]=c('part_index')
chaptersId = PartData[which(PartData$part_type=='section'),c('part_index','part_parent')]
chaptersId = chaptersId[order(chaptersId$part_index),]
chaptersId$id = 0
chaptersId = unique(chaptersId[,-c(1)])
chaptersId$id = -1:(-nrow(chaptersId))
for(i in 1:nrow(chaptersId))
{
PartData[which(PartData$part_id==chaptersId$part_parent[i]),]$part_index = chaptersId$id[i]
}
minIndex= min(PartData[which(PartData$part_type=='chapitre'),]$part_index)
tomesId = PartData[which(PartData$part_type=='chapitre'),c('part_index','part_parent')]
tomesId = tomesId[order(tomesId$part_index),]
tomesId$id = 0
tomesId = unique(tomesId[,-c(1)])
tomesId$id = (minIndex-1):(minIndex-nrow(tomesId))
for(i in 1:nrow(tomesId))
{
PartData[which(PartData$part_id==tomesId$part_parent[i]),]$part_index = tomesId$id[i]
}
tomesId = unique(tomesId[,-c(1)])
tomesId$id = (minIndex-1):(minIndex-nrow(tomesId))
minIndex
minIndex= min(as.numeric(PartData[which(PartData$part_type=='chapitre'),]$part_index))
tomesId = PartData[which(PartData$part_type=='chapitre'),c('part_index','part_parent')]
tomesId = tomesId[order(tomesId$part_index),]
tomesId$id = 0
tomesId = unique(tomesId[,-c(1)])
tomesId$id = (minIndex-1):(minIndex-nrow(tomesId))
for(i in 1:nrow(tomesId))
{
PartData[which(PartData$part_id==tomesId$part_parent[i]),]$part_index = tomesId$id[i]
}
PartData
meltParts=melt(PartData, id.vars = 'id')
PartsData.json = toJSON(unname(split(meltParts,1:nrow(meltParts))))
cat(PartsData.json, file="structure.json")
